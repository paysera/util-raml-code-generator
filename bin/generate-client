#!/usr/bin/php
<?php

require __DIR__ . '/../vendor/autoload.php';
require __DIR__ . '/../container.php';

/** @var \Paysera\Util\RamlCodeGenerator\CodeGenerator $generator */
$generator = $container['code_generator'];

if (!isset($argv[1]) || !(isset($argv[2]))) {
    echo 'You must provide the API name and its namespace (with escaped slashes, i.e. Acme\\\\Client\\\\AcmeClient)';
    echo "\n";
    exit(1);
}

$generator->generateCode($argv[1], $argv[2]);

echo sprintf(
    'Code successfully generated to "%s%s%s" directory',
    $container['parameters.generated_directory'],
    DIRECTORY_SEPARATOR,
    $argv[1]
);
echo "\n";
